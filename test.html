<!DOCTYPE html>
<html>
<head>
  <title>Canvas vs SVG Bar Charts</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <h2>Canvas Bar Chart</h2>
  <canvas id="canvas-chart" width="400" height="300"></canvas>

  <h2>SVG Bar Chart</h2>
  <svg id="svg-chart" width="400" height="300"></svg>

  <script>
    // Sample data for the bar charts
    const data = [
      { label: 'A', value: 40 },
      { label: 'B', value: 70 },
      { label: 'C', value: 50 },
      { label: 'D', value: 90 },
      { label: 'E', value: 60 },
    ];

    // Function to create the canvas bar chart
    function createCanvasBarChart() {
      const canvas = document.getElementById('canvas-chart');
      const ctx = canvas.getContext('2d');

      const width = canvas.width;
      const height = canvas.height;

      const barWidth = width / data.length;

      // Clear the canvas
      ctx.clearRect(0, 0, width, height);

      // Find the maximum value to scale the bars properly
      const max = d3.max(data, d => d.value);

      data.forEach((d, i) => {
        const barHeight = (d.value / max) * height;
        const x = i * barWidth;
        const y = height - barHeight;
        const barColor = `rgb(0, 120, ${Math.floor(255 * (i / data.length))})`;

        ctx.fillStyle = barColor;
        ctx.fillRect(x, y, barWidth, barHeight);

        // Add label
        ctx.fillStyle = 'black';
        ctx.fillText(d.label, x + barWidth / 2, height - 10);
      });
    }

    // Function to create the SVG bar chart
    function createSvgBarChart() {
      const svg = d3.select('#svg-chart');
      const width = +svg.attr('width');
      const height = +svg.attr('height');

      // Find the maximum value to scale the bars properly
      const max = d3.max(data, d => d.value);

      const xScale = d3.scaleBand()
        .domain(data.map(d => d.label))
        .range([0, width])
        .padding(0.1);

      const yScale = d3.scaleLinear()
        .domain([0, max])
        .range([height, 0]);

      const bars = svg.selectAll('.bar')
        .data(data)
        .enter()
        .append('rect')
        .attr('class', 'bar')
        .attr('x', d => xScale(d.label))
        .attr('y', d => yScale(d.value))
        .attr('width', xScale.bandwidth())
        .attr('height', d => height - yScale(d.value))
        .attr('fill', (d, i) => `rgb(0, 120, ${Math.floor(255 * (i / data.length))})`);

      // Add labels
      svg.selectAll('.label')
        .data(data)
        .enter()
        .append('text')
        .attr('class', 'label')
        .attr('x', d => xScale(d.label) + xScale.bandwidth() / 2)
        .attr('y', d => yScale(d.value) - 5)
        .attr('text-anchor', 'middle')
        .text(d => d.label);
    }

    // Call the functions to create the bar charts when the page loads
    window.addEventListener('load', () => {
      createCanvasBarChart();
      createSvgBarChart();
    });
  </script>
</body>
</html>